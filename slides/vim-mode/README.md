title: Vim 模式
author:
  name: modood
  url: https://github.com/modood
output: index.html

----

# Vim 模式

----

### 模式

**四种模式**

1.  正常模式（normal-mode）
2.  插入模式（insert-mode）
3.  命令模式（command-mode）
4.  可视模式（visual-mode）

**可视模式的三种子模式**

1.  字符操作（VISUAL）
2.  行操作（VISUAL LINE）
3.  块操作（VISUAL BLOCK）

----

### 模式切换

```
 +----------+
 |          |
 |  command |
 |          |
 +---+--^---+
     |  |
 Esc |  |
     |  | :
Enter|  |
     |  |
 +---v--+---+           Esc           +----------+
 |          <-------------------------+          |
 |  normal  |                         |  insert  |
 |          +------------------------->          |
 +---^--+---+       i,a,I,A,o,O       +----------+
     |  |           s,S,cc,c,C...
     |  | v
 Esc |  | Shift + v
     |  | Ctrl + v
     |  |
 +---+--v---+
 |          |
 |  visual  |
 |          |
 +----------+
```

----

### 正常模式

*   移动光标
*   滚动屏幕
*   增删改查
*   组合操作

狂按 Esc 键就能回到正常模式！！！

----

### 正常模式-移动光标

**字符移动**

```
  k                             上
h   l                         左  右
  j                             下

  0                             到本行行头
  $                             到本行行尾
  ^                             到本行第一个非 blank 字符
  g_                            到本行最后一个非 blank 字符

  w                             到下一个单词的开头
  b                             到上一个单词的开头
  e                             到下一个单词的末尾

  *                             到下一个匹配单词
  #                             到上一个匹配单词
  %                             匹配括号移动

  f[x]                          到下一个为 x 的字符处
  t[x]                          到下一个为 x 的字符前

  ``                            来回跳转两个位置
  C-o                           返回最近停留的一个位置
```

----

### 正常模式-移动光标

**行移动**

```
  gg                            跳转到顶行
  [n]G                          跳转到第几行
  G                             跳转到末行

  H                             当前屏幕最上行
  M                             当前屏幕中间行
  L                             当前屏幕最下行

  (                             前移 1 句
  )                             后移 1 句
  {                             前移 1 段
  }                             后移 1 段
```

----

### 正常模式-滚动屏幕

**滚动和翻页**

```
  zt                            将当前行移动到屏幕顶端
  zz                            将当前行移动到屏幕中央
  zb                            将当前行移动到屏幕底端

  C-e                           下翻一行
  C-y                           上翻一行

  C-d                           下翻半屏
  C-u                           上翻半屏

  C-f                           下翻一屏
  C-b                           上翻一屏
```

----

### 正常模式-增删改查

**字符操作**

```
  x                             删除一个字符
  s                             删除一个字符，并且进入插入模式
  r                             替换一个字符
  ~                             大小写转换一个字符
  C-a                           数字加一
```

**单词操作**

```
  g~                            大小写转换
  gU                            变大写
  gu                            变小写
```

----

### 正常模式-增删改查

**行操作**

```
  D                             删除到行尾
  C                             删除到行尾，并且进入插入模式
  S                             修改行
  cc                            修改行，并且自动缩进

  dd                            剪切行
  yy                            复制行
  p,P                           粘贴
  C-;                           查看粘贴板

  >>                            向前缩进
  <<                            向后缩进
```

----

### 正常模式-增删改查

**其它**

```
  u                             撤销
  C-r                           重做
  .                             重复上一个命令

  K                             查找光标所在单词的手册
  ZZ                            保存退出vi
  C-z                           中断
  fg                            恢复
```

----

### 正常模式-组合操作

**组合**
```
  [action] [position]
  [action] i, a [object]
  [count] [command]
```

**例如**
```
  action                剪切（d），复制（y），修改（c）
  position              单词(w)，行尾（$），文章结尾（G）等
  object                单词（w）， 句（s）， 段(p)， 引号括号（"", '', (), [], {}）等
  count                 数字
  command               删除行(dd)，移动一个单词（w）
```
```
  dw                    删除一个单词
  dG                    删除文章结尾
  di(                   删除括号内的内容
  4dd                   删除四行
  4w                    移动四个单词
  d4w                   删除四个单词

  更多...
```

----

### 可视模式

**子模式**
```
  v                             进入字符操作子模式
  V                             进入行操作子模式
  C-v                           进入块操作子模式
```

**其它**

```
  =                             格式化代码
```

----

### 插入模式

**补全**
```
  C-n                           向下选择
  C-p                           向上选择
```

----

### 命令模式

**分屏**
```
  :sp                           上下分屏
  :vsp                          左右分屏
  :Sex                          上下分屏，浏览目录
  :Vex                          左右分屏，浏览目录

  C-w  =,+,-                    平分，增大，减小
  C-w  h,j,k,l                  向左，下，上，右移动

  C-w  s                        上下分割当前文件
  C-w  c                        关闭
```

----

### 命令模式

**查找**
```
  :/string                      正向查找
  :?string                      反向查找
  n                             查找下一个
```

**替换**
```
  :[位置1[,位置2]]s/[旧内容]/[新内容]/[标记]

  :s/old/new                    替换
  :1,$ s/str1/str2/             用str2替换正文中首次出现的str1
  :%s/old/new/giC               % 所有行；g 所有匹配项；i 忽略大小写；c  确认信息  
```

----

### 命令模式

**文件**
```
  :w                            保存
  :wq                           保存退出
  :z                            保存退出
  :q!                           不保存退出

  :w [file]                     另存为
  :a,bw [file]                  将第a行至第b行写入file文件
  :r [file]                     读取fle文件的内容，插入当前光标所在行的后面
  :e [file]                     编辑新文件
  :f [file]                     重命名文件
  :f                            输出当前文件名称和状态
  :sav <path/to/file>           另存为
  :bn                           下一个文件
  :bp                           上一个文件
  :n                            下一个文件
  :recover                      上次编辑意外退出，从临时文件恢复文件内容(该文件以.开头，并以.swp 结尾)
```

----

### 命令模式

**Shell  命令**
```
  :![command]                   无需退出vi即可执行linux命令
  :r ![command]                 导入命令执行结果：
```

**设置选项**
```
  :set number

  更多...
```

**其它**
```
  :n
  :help
```

----

# 谢谢
